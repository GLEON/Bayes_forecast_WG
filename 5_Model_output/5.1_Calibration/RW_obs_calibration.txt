######################################################################################################
######################################################################################################
#### JAGS model file written by runjags version 2.0.4-2 on 2020-04-10 11:02:12 
######################################################################################################
######################################################################################################

model{
for(k in 1:max(year_no)){
for(j in 1:max(season_weeks)){
#this fits the blended model to your observed data. 
y[k,j] ~ dnorm(mu[k,j],tau_obs)
}
#### Process Model
for(j in 2:max(season_weeks)){
mu[k,j]~dnorm(mu[k,j-1],tau_proc) 
}
#Loops through number of years and defines prior for each year
mu[k,1] ~ dnorm(x_ic,tau_ic) #keep in mind you'll need to index like a matrix 
}
#### Priors
tau_proc ~ dgamma(a_proc,r_proc)
tau_obs ~ dgamma(a_obs, r_obs)
}
#monitor# tau_proc, tau_obs, mu

######################################################################################################
######################################################################################################
#### Initial values 
######################################################################################################
######################################################################################################

inits{
".RNG.state" <- c(282, -1376760311, -821936550, -682885884, -943806062, 1917787144, -581612482, 1492760327, 37443526, 1895084244, 478474832, -1332384710, -160810804, -1477551453, -65301989, 1979306185, -481115365, -1189873897, -1314525822, -141728494, 1729190326, -605951469, -374901150, -4746566, -515330349, -1182032069, 934209958, -451654509, 758685825, 563020033, -537951549, 1208326535, -1048945041, 1159374298, -1671612075, 258458163, 582011560, 1100048486, -1003230703, 170586110, 290920355, -1763898640, 1547990907, 1280080068, 915985665, 786961734, -976590136, -1437288960, -29000944, 1594357697, 1324282330, 1845882232, 1583267325, 562471121, 1619642395, -874729632, -705470847, -377230750, -847997550, 903506071, -581572338, -721995039, 331789716, 642047292, 1787869055, -1845312735, 1933647369, -1848698988, 513522618, -536760227, 354159756, 2003578672, 1605354325, -1542676161, 374550823, -1652213497, 2046973296, 652225381, -1035498995, 2015495259, 1738792376, -1536956302, -1596408972, -1098649892, 96275569, -2076455414, -1640627623, -1881288454, -20296552, -17650628, -1546797121, -2046694456, -1036381465, -311076647, -751529029, -1339778654, -2007173103, -2112428041, 1977627813, 1002631086, 1408250526, -1402882229, 309470474, -1455100695, 2052514380, 1841011827, 1829373758, -1075427674, -282186116, -1651205814, -232476211, 457605811, -1891842454, -1054131682, -1934431447, 2120659506, -1902616780, 232752416, 153767501, 296386556, 35052385, 837617574, -1476403935, -882937731, 941849297, 2059590519, -554441163, 205189964, -2075508159, 283068637, -758474395, 191227546, -1125046706, 1775331319, 1331990507, -1598596662, -35048102, -1292086132, 1853459080, 597253485, -1882363058, -1609274471, -1647892023, 1426803938, -1318940651, 17575993, 787320468, 10088154, -1005249008, 536714439, -1768333815, -166045958, -1324503253, 2122931892, 1137993437, -1793907622, 48466007, 2098484204, 686981242, -58536, 818120422, 118298679, -148230576, 684450875, -46379454, 674910433, -1303731591, 1292443742, -921891902, 90566412, -2100498552, 749154584, 1846386739, 1042068742, 386326987, 1826486775, -1482403810, -1359365304, 1570184216, -556935404, 1853118734, -1811833087, -436210456, -1413385794, 1530346357, 518005180, 704068282, 1604096490, -1551968702, -1150513192, -890987404, 1899570981, 896445471, 1157324036, -504555502, 959802088, 689149183, 2086633386, 622695117, -497421577, -1322926708, -1927568575, 81459034, -1352677580, -1427082321, -1598706976, -576525351, 292532484, 1164169343, -1980313739, 1577622169, -1910983169, 1123465141, -1297537011, 539532490, -582241665, -1948317645, -445812565, -1184800258, 358051492, 1337762657, -1073041189, -1141313498, -1788356397, 1252548671, -1473052274, -1063007682, 902804919, -2093556671, 648723703, 1934055058, -1589903768, -2143149221, 701163183, -1370996260, -457182980, 1608242860, -1907995434, 766824588, -123479465, -2068917119, -669364472, -1950801113, -947862884, 1649849585, 1012644382, -1473245496, -1327268377, 492722391, 397630971, -1779830023, -2026024408, 594568077, -1432722937, 1301933162, 837121177, -429190158, -1169755264, -627192288, 1648073317, 1694628561, 938897616, -523620629, 1042018691, 999124940, 1946825263, -579136357, -1213939317, 1749482466, -150944604, -1971619050, 2001890328, -1671127179, 26901016, 834573778, 1505236322, -251260, 785505413, 528205279, 367761933, -65262209, 547582664, 1252972205, -159700992, 1188744479, -666826364, 1259803938, -1168933257, 1116287596, 820231910, -1127510467, 459186528, 834540647, -787334003, -1000137545, -518119125, 675038167, 1852046311, -465687266, 1540334826, 2104325694, 1003023319, -425813424, 1200714217, 1719225995, 608817896, 35696504, 1424926186, -1315931146, 231328570, -1156352037, 424781634, -1899948215, 458985278, -1430861918, 576891640, -966847850, 1456257121, 1200274965, -1051944883, -945170770, -1250085177, 1122275099, 1340818982, -1974822277, -287295457, 709108566, -1204223415, 1755868390, -823832890, -722570794, -433079846, 265593057, 346781175, 620303841, 587249686, 989954891, 1099404854, 1880731500, 64943336, -1667616209, 1299426536, 787491185, 1233897964, 1961110754, 640743628, 71060072, -1976810890, 75107582, 1712908865, 2131343289, 529010195, 102490597, -311459466, -1081790458, -1791040988, 1836651498, 1381449908, -1424122487, 283121695, 1728882895, -947775424, -1815001062, 2109268446, -2042620718, -1651405720, 1471303393, -449494282, -1107302388, 2008990160, -1279228953, 1521412030, -1133356201, -1915286625, 85942886, 2113841786, -1245864777, -1256150429, 382371357, 1025727369, 543920077, -680797215, -24116706, -533858949, -213340494, -300861767, -818326768, -1527213036, -457525117, 1263554664, 188669967, 533867241, 1634769679, -1540706881, 53195508, -1265536562, 952185388, -22828428, -403505350, -1117524118, -910020334, -125477693, 1083326916, -763398155, -1589269087, -793484595, 1038839106, 1296658637, 2028137761, 1825744642, 810669777, -678191749, 386385094, 811467699, 2117964650, -2033624705, 1924973722, -869730031, -1589468176, -1142719119, -296463674, -585014991, -1559710240, -923580726, 467280624, -400379717, -2129012577, 1041705497, 828135747, 77243262, -82164157, 188169558, 1863272358, 1798694571, -586551392, 1165768430, 446554945, 801547949, -74872685, 1964148659, 952897908, 1727966256, -1169883898, 956972039, 1955642631, -399825980, 444194138, 730052510, -312066939, 1059455059, 82829045, 1563711116, -1702907570, 1566668239, 1876276460, -655701506, 387677316, -1920931065, -1140778018, -2072036706, -263997703, 899664477, 1793443705, -201084984, -176479969, -251888362, 432587233, -282975512, 432856865, 1081778316, 346123291, -960437917, -536749827, 66722461, -1630041398, -391298800, -1853192196, 903579536, 1174332586, 624858335, -1721846186, 1619703698, 1293812260, -2142406431, 32879827, -483825871, -2059534450, 79607551, 1432037755, 1979627791, -792425757, -944631483, 2045839340, 1872231332, 92712853, 1105092467, 1035675919, 2058950480, -256047180, 852500665, -99392546, -1824247948, 533392417, -1387963513, 1869397694, 2028630935, 1680926163, 220345695, 1951194566, 2084953042, 1933594720, -1830587593, -266178413, 1431280690, -1817446034, -987231092, -2099101470, 788861199, 490055518, 114685358, -546211118, 1308885317, -298439989, 1032298211, -598368117, 1295779373, -1579380771, -1277317291, -125823184, 568746413, -618121749, 606767342, 1813099130, -672543063, 2004303460, 1246856763, -2141335348, 237522066, -922749021, 689554871, 1135308268, 1291133195, 1234525465, -218712463, 652943238, -507378516, 50059454, 2034358305, -1734953558, -1178273664, 2007920015, -709253913, -1817025128, 1407996783, 1008854098, -142789381, 1589037099, 891841596, 1397178410, -1274974610, -951820626, -91997754, -108086599, -1629829275, 2145727412, -998048051, 1645820947, -596505488, -318872368, 1422110767, 334904170, -1101540416, -1175314790, 2068262699, 815585282, 459301595, 1940848431, 1745126863, -724635841, 497106240, -308304623, -429399813, -680499818, -1071558175, 239278742, -639284676, -284223650, -968715569, -1774615922, -1830418777, -2003451120, 2030961489, 2124192667, -1823556881, 934188670, -1512957665, 2062217623, -1240700251, -90454137, -909523917, 1475471837, -815598524, 1182543891, 16174583, 421388153, 205203972, 1392576655, 242675524, -1929321806, 1128762636, -1311685746, -641811586, 405548138, -894236502, 221325000, 741939428, 233766735, -124036553, -847055677, -507216050, -1450405708, 1887574371, -1236182226, -36430466, 1901280687)
"mu" <- structure(c(-4.90638300550172, -4.84901374889367, -5.10346855994394, -5.02675157951424, -4.8801315695351, -5.05302439903711, -4.60800142966379, -3.5325799997357, -4.51668627451106, -4.8208602120514, -5.14360813911133, -4.42867851501294, -3.47928658049839, -3.53345488948081, -4.61688914588503, -3.72162577010634, -4.46159475089342, -2.95983531340404, -3.795806250947, -3.33693665589882, -4.29300018456693, -2.50744610783789, -3.97870095422819, -1.9060940104922, -5.0043558711235, -1.52870476722325, -4.26776478216456, -2.28254055361672, -3.29538284934982, -0.959496956178296, -4.75458934646575, -0.549824439818512, -2.78570084941452, -3.30077263477938, -4.64289273892827, -0.801383526445046, -3.1393048843014, -2.61607692596778, -3.83578921319636, -2.01925737627991, -3.14700775867741, 0.978791268291374, -1.63428044422587, -2.84757418056902, -2.49240610353887, -0.723186283672599, -2.9867820001824, 0.588514372706378, -0.625854229545433, -2.18748854522716, -1.39626636739389, -1.97452460516104, -3.62726011396997, -0.0822981642266833, -0.156185036491234, -2.18384338892699, -1.27924717684586, -0.260877223939109, -2.04462395175324, 0.866575471785078, 0.260587723598355, 0.879804643452801, -0.37457519462058, -0.79486874023289, -1.71633668823085, 0.697646370419281, -1.88508068148797, 3.8044299835499, -0.637097058461358, -0.725976023909105, -1.18506679069132, -1.10653957062721, -0.206802019908428, 2.86119241687172, 1.13534398875607, -2.04905829328482, -0.8152321343344, -0.8480684960864, -1.33951878974577, 1.84665276231304, -0.0656974314407665, -1.60842869992439, 1.75517758372796, -1.74026621054059, -1.5819792126274, -1.08915260182513, -0.832914870369076, -0.773011833209808, 1.64083117959243, -0.589813299560861, -1.18284579535621, -0.745861851336597, -0.545617556550201, -0.029827514019534, 2.30574063955744, -1.71226395922198, -0.674057725118343, -2.58495117929473, -1.65099675701215, 0.150557132247153, 1.99379174610095, -0.90189500156391, 0.197241638349872, -2.21572994130503, -3.90281020363157, -1.29472291168824, 2.07906961337665, -2.17018185348857, 1.22365505145811, -2.47010489195172, -5.48245453173435, -2.55455678690025, 0.565641064229883, -2.72670334097561, -0.172745812830003, -2.22307838749138, -5.9844035944208, -3.61394933349644, -0.559844900444225, -3.04386685006425), .Dim = c(6, 20))
"tau_obs" <- 1.1433166428816
"tau_proc" <- 0.721610304191358
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Mersenne-Twister"
}

inits{
".RNG.state" <- c(12003, 21380, 7760)
"mu" <- structure(c(-4.90423993835866, -4.84356152253349, -5.15220562667818, -5.01845076738833, -5.06792054168539, -5.0161460996444, -3.94474642983784, -4.24197993296427, -4.79275910653464, -5.22010420054279, -5.42869742587411, -4.52220127279247, -1.88928910234701, -3.94180899782875, -5.28078771959888, -3.1268775098806, -4.94589088704433, -4.39759433546256, -4.11849860273818, -2.6467983482324, -6.01098060964391, -1.59352044646136, -3.72727983558563, -2.20453460611808, -3.87328967008291, -2.71206404744948, -4.72133359330976, -1.50911828362954, -3.90096955749263, -1.35567633785356, -4.07685606285187, -0.653602739186878, -5.06469326328497, -2.11787150073429, -3.38339417741654, -0.68581165735056, -3.08022786548934, -1.54055206745829, -4.09288799133497, -1.44605076929338, -3.19773714510262, 0.105554986935669, -2.43696650775239, -1.20456501020534, -2.28750584067404, -1.66783231869177, -2.26764527768415, 0.240692142772561, -0.713355097696626, -1.24482639258914, -2.0955591882094, -1.27806424956805, -2.15045328907635, 0.479372845669089, -0.996262222758598, -1.74941366151142, -2.22194877495568, 0.11183273295382, -0.965651147051539, 1.06832988525376, -0.620629264765257, 0.494594696011815, -0.998975054609041, 0.332940032771257, -0.509208999156745, 0.225963561763776, -1.37455952740911, 2.35369389910731, -0.410475068593613, -1.07256434536439, -0.435683825885611, -0.162272597406693, 0.30084563530672, 2.34798758950253, 1.20328027934926, -1.40188787552298, 0.829624422764708, 0.430711764007928, 0.0613110552863778, 1.04718800324672, 1.60117392536237, -0.803221080214482, 1.24317695779918, -0.637893486665536, -0.242606247591742, -0.392769747515369, 0.505058227462549, -0.489188350604906, -0.252065471399303, 0.343253768485763, -0.914064548040773, -1.8682188117314, -0.365966980522772, 0.425907757457279, 1.53589479143887, -0.174926493194801, -1.1606919623376, -2.23515181601552, -2.76372952647629, -1.36447685740528, 2.06591085543022, -0.559547336131691, 0.66858712852677, -2.74416478093942, -5.76648900542459, -1.14083465299035, 3.12755268406577, -1.58530020624562, 0.714674312137262, -3.35946927827898, -5.13746216143205, -2.94039841926946, 0.465706038640976, -3.22531146582276, 0.00492267610578631, -2.27224789360559, -6.00980994197812, -3.79272320381176, -0.738605892026383, -2.64465016634984), .Dim = c(6, 20))
"tau_obs" <- 1.26608804245999
"tau_proc" <- 1.08172318584286
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Wichmann-Hill"
}

inits{
".RNG.state" <- c(1241086715, 384179211)
"mu" <- structure(c(-4.82545917049685, -5.12952165615829, -4.98168802669719, -5.16103876831435, -5.15686370133754, -4.9963540712017, -4.35420228968096, -2.42718356742746, -4.72591844377068, -4.42287688852389, -5.52905931038225, -4.56054165599783, -4.74061501307585, -3.53028437913963, -6.39797788396833, -2.76373159259054, -5.3823764177945, -3.78747964730199, -3.38967424443283, -3.07583780753006, -5.75922255545882, -1.8235978560616, -3.35383699005428, -2.48150944154239, -3.84908270390619, -2.11061776726948, -4.53411493720106, -2.0842749599042, -3.84590687723324, -1.14723873974092, -4.72324391077654, 0.684340393176713, -5.56875626359446, -2.86136157771468, -3.2981868358396, 0.400364742728007, -2.50405896332274, -1.82000496265026, -5.13255435261858, -1.9564071467416, -3.10737384113875, 0.587553159615151, -1.4882439847266, -1.33930433686437, -2.81799258129059, -2.04355156994841, -4.00694590807094, -0.0966933577887639, -0.617958751213024, -1.55360819052361, -2.37772304186975, -1.04316080618921, -2.45567186609945, -0.0111429802551271, -0.941553169520138, -0.768610114972398, -0.571710064376447, -0.941371782830748, -0.513361308101706, -0.158329177298442, 0.0721354568474133, 2.43685500986924, 0.665085826191482, -0.453228965635281, 0.571082881103502, 0.178662387935494, -1.39844473804952, 3.72462218384334, -1.02997934443785, 0.533133005656087, -0.258535578863761, -0.290887132731494, -0.256292147971399, 2.02198518645711, 0.928804217047521, -2.04545879319054, -0.684265541521002, -0.273957800461554, -0.369685178485863, 1.92886804161604, 0.50662086023111, -1.55390709455797, -0.0849362618360407, 0.361729084383805, 0.554590810466705, 0.615211499415652, 0.627221023114543, -1.70787001582748, 0.098927031602525, 0.269586052005812, -1.82985859047688, -0.291176991294249, -1.227954390047, -1.29245483935921, 0.855954140051693, 0.698323382039076, -0.395718282414302, -1.40868612286102, -3.33192656491856, 0.105373017803973, 1.2626003806725, 0.0297497360496929, 0.776246663467483, -3.42940605113202, -3.58372818740574, -1.10882552969996, 3.03792032862422, -1.57945991816479, -0.338525504334661, -3.92220189720236, -6.41510739384351, -4.18048498067992, -0.533029881623093, -2.81037942288293, -0.413691871988498, -3.25085678086043, -5.02744183458369, -4.37321428877336, -0.525993716493794, -2.76711300912019), .Dim = c(6, 20))
"tau_obs" <- 1.66513819470606
"tau_proc" <- 0.537208835291127
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Marsaglia-Multicarry"
}



######################################################################################################
######################################################################################################
#### Data 
######################################################################################################
######################################################################################################

data{
"y" <- structure(c(-4.04555439805267, -2.92807362508018, -5.65499231048677, -5.65499231048677, -5.65499231048677, -5.65499231048677, -4.55638002181866, -1.88059068293467, -4.55638002181866, -5.65499231048677, -5.65499231048677, -4.55638002181866, NA, -4.04555439805267, -5.65499231048677, -2.92807362508018, -5.65499231048677, -5.65499231048677, -3.2570970376884, -3.70908216143146, -5.65499231048677, -1.93447577142965, -3.70908216143146, -1.98413136187551, -4.04555439805267, -2.59695615359662, -4.55638002181866, -0.668454567969574, -3.70908216143146, -1.47185224948154, -5.65499231048677, 0.656223826455347, -5.65499231048677, -4.55638002181866, -3.70908216143146, 0.282543894595657, -2.50715225873532, -2.69562768110365, -5.65499231048677, -1.17928019173556, -2.69562768110365, 1.31681029758931, -1.53479436943833, -2.80511191394534, -1.53479436943833, -2.14986400597638, -2.59695615359662, -0.0645385211375712, -0.587886669902452, -0.710293339394916, -1.83571135675724, -1.25001674282734, -2.50715225873532, 0.543776723905677, -0.211338505864447, -2.21183072972558, -1.47185224948154, -0.696151689580244, -1.00922872753342, 0.266586109157047, -1.02861991684807, 2.75680861873598, -0.167827110643502, -0.381992751923022, -0.613412212541092, 0.53561579257321, -2.59695615359662, 3.57824114649315, -1.75157767959522, 0.163393546908436, -0.83355933427669, -0.538710827255527, 1.18096003001686, 3.79205633738096, 1.41257108419811, -1.83571135675724, -0.600567999266852, 0.896292085367465, -0.0135919535194671, 1.55360802747343, 0.870246793372748, -1.27475298638698, 1.06832488772965, -1.17928019173556, -0.575364144903562, -0.696151689580244, 0.0559076319382961, -0.381992751923022, 0.46216045178471, 0.139327065221099, -1.32614043830014, -0.900171349994272, -0.768948893976227, -0.5629964960949, 1.43805629567848, -0.900171349994272, -2.27789248040367, -1.88059068293467, -2.80511191394534, -0.434636485408444, 2.24564430253124, 0.677779703428824, 1.51852803707426, -2.92807362508018, -4.04555439805267, -1.11321844105747, 4.40231321347409, -2.27789248040367, NA, -4.04555439805267, -5.65499231048677, -3.70908216143146, -0.768948893976227, -4.04555439805267, -0.27377916728279, -3.09004295302523, -5.65499231048677, -3.45776773315055, -1.44180707105015, -2.03638205221939), .Dim = c(6, 20))
"year_no" <- c(1, 2, 3, 4, 5, 6)
"season_weeks" <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20)
"x_ic" <- -5
"tau_ic" <- 100
"a_proc" <- 0.001
"r_proc" <- 0.001
"a_obs" <- 15.37
"r_obs" <- 7.84


}

######################################################################################################
######################################################################################################
