######################################################################################################
######################################################################################################
#### JAGS model file written by runjags version 2.0.4-2 on 2020-04-20 12:26:49 
######################################################################################################
######################################################################################################

model{
for(k in 1:max(year_no)){
for(j in 1:max(season_weeks)){
#this fits the blended model to your observed data. 
y[k,j] ~ dnorm(mu[k,j],tau_obs)
}
#### Process Model
for(j in 2:max(season_weeks)){
mu[k,j]~dnorm(mu[k,j-1],tau_proc) 
}
#Loops through number of years and defines prior for each year
mu[k,1] ~ dnorm(x_ic,tau_ic) #keep in mind you'll need to index like a matrix 
}
#### Priors
tau_proc ~ dgamma(a_proc,r_proc)
tau_obs ~ dgamma(a_obs, r_obs)
}
#monitor# tau_proc, tau_obs, mu

######################################################################################################
######################################################################################################
#### Initial values 
######################################################################################################
######################################################################################################

inits{
".RNG.state" <- c(426, 25058, 16213)
"mu" <- structure(c(-5.11620337325666, -4.92723892500735, -4.85085677611105, -5.08378567027721, -5.02314854469978, -4.88823304488442, -4.04712298757837, -3.69824705525489, -3.91511674146499, -4.29485523712698, -4.30153549867033, -4.29617738284632, -5.17038780319468, -3.64148227853392, -4.25344625268529, -2.68746365938169, -3.41329835935767, -3.96915151772618, -3.39687316597412, -2.96396149064873, -4.47401207924702, -1.94348568092751, -4.01622387150949, -1.93816290471108, -3.40610863918303, -1.83935861869363, -4.7603597885203, -1.16203829181481, -3.0316857389747, -1.09994390320358, -3.66629638168042, 0.638353645653711, -3.69758008067368, -2.14342150206653, -3.72160540776501, -0.173342318422861, -2.1302591147795, -2.01883593298501, -4.34110033043987, -1.3217190679354, -3.31052400306871, -0.241210389854517, -1.0152519666656, -2.42097819909649, -2.87232427436618, -2.28366939434076, -3.20754164696598, 0.66365624984625, -1.1273011673669, -1.07169398714521, -1.98655479535595, -1.04304876674073, -2.94583407649426, 0.510731412642104, -0.55039547820846, -0.34739662719899, -0.509555573197434, -1.04734820011503, -1.12902034143344, 0.306449110622332, -0.519635665848893, 1.98939171157245, 0.190552739525329, -0.965978948402011, -1.3771466202683, 0.271465557002997, -1.82029800340123, 2.41419566179293, -1.20602703927525, 0.240695592418835, -0.984963002909826, -0.253400605798992, 0.413989809154576, 3.41858192610216, 1.23948370710125, -1.14985647216792, -0.503257914262844, 0.210908230559626, -1.20654418734163, 1.5173140737012, 0.748354248502314, -1.6987475453295, 1.2892916067408, -1.1189937419471, -1.22888642451586, 0.233981081255595, 0.563954859478504, -0.393808453585429, 1.82643420838981, -1.03135757782283, -0.532548886125117, -0.432046101450274, -0.299273540586387, -0.278391612243323, 2.51019575501724, -0.658237615725435, -1.33257381232087, -2.19198238810494, -2.44764637472893, -2.14649673666583, 2.38341990671162, 0.168215071270649, -0.0617011559244893, -2.14342979326622, -3.72383457280897, -2.51103887725877, 3.14410159700259, -2.56394825521582, -0.338063746254193, -2.83465414532716, -3.67557258747813, -2.44307892580534, 0.754513295486631, -2.65902442793619, 0.311498558862605, -2.42462511812009, -4.44567265676136, -2.89987660204827, -0.981679046959311, -2.14083136697592), .Dim = c(6, 20))
"tau_obs" <- 1.47141666372629
"tau_proc" <- 1.12771065698875
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Wichmann-Hill"
}

inits{
".RNG.state" <- c(77499689, 20863246)
"mu" <- structure(c(-4.8914319134447, -4.81396762012939, -4.88414421062869, -5.0334022631837, -5.08431292136685, -4.74395990352795, -4.6608479114052, -2.57619072379381, -5.37794556905011, -5.5184811769389, -5.34821004625586, -4.31350358158599, -3.81778154339306, -4.25328567747954, -5.19584320633731, -3.11783175046146, -5.14902660382356, -5.07173018791449, -3.68430609539528, -2.70959221744094, -5.00053214400827, -1.91616816061513, -3.35572345484965, -2.22060025301713, -3.49603510232735, -2.40318234245764, -3.29665126102116, -1.3136968018676, -3.92097827299159, -1.01284353704956, -4.05253882306711, -0.387929766370262, -4.60879376947574, -2.17599998404487, -3.40971251433946, 0.719382630713366, -2.27997986139388, -1.44094478346715, -4.67661527060133, -1.69754899110273, -2.90883874624678, 0.402538946506375, -1.57316348658427, -1.50084541457687, -0.980997198552532, -0.0585991167954514, -2.94289437391136, -0.565604398973404, -1.52241696920586, -0.166991887065323, -1.09387316026795, -1.38734331752943, -1.9282757939915, 0.355103830347943, -0.0399291372835196, -0.948653185541457, -0.929283781945408, -0.462064153477851, -0.263955710411674, 0.338584543134666, -0.560612779123836, 2.12212087621898, 0.299209445808983, -1.72042947419259, -0.308769339659835, 1.24701228538928, -2.08144588786225, 2.78171116324554, -0.30357339859946, -0.660034943529828, -0.575613744832184, 0.47967441003723, 0.0992640124735669, 3.44505299781477, 0.585942707509481, -0.838971495257999, -1.3353649258377, 0.882718927222697, -0.644033103814981, 2.01719083978495, 0.679714668596861, -0.758858399960785, 0.432284749433737, -0.56753527132551, -0.205675632383824, -0.362220167626963, -0.323281353851321, -0.430154859498512, 0.466240300926732, -0.610707621955499, -1.05055648164663, -0.771931277169738, -1.749298232617, -1.15341363616185, 1.76167804546201, -0.251343190659453, -1.85711453329374, -2.86487009989649, -2.27168803596012, -0.329787129477166, 2.81067937827848, -0.562489086523011, 0.71760644481121, -2.60192765217068, -3.24880799346825, -1.80798976786552, 2.33094057778525, -2.51343689190175, 1.43519985332298, -3.26541700639528, -4.23602227518836, -3.26407052845954, -0.572219229656722, -2.56536740766146, 0.375099966940143, -3.08379221579317, -4.09801613690454, -3.38345573716058, -0.85915348238586, -1.51322076111642), .Dim = c(6, 20))
"tau_obs" <- 1.66102989364555
"tau_proc" <- 0.69252309640324
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Marsaglia-Multicarry"
}

inits{
".RNG.state" <- c(-1464360976, 1252533101)
"mu" <- structure(c(-5.03338179939164, -4.91788630549753, -4.88462632542424, -5.03172360957248, -4.89386296552235, -4.97645728482637, -3.49338078246024, -2.63086763373051, -4.95545148960486, -4.57854758209964, -4.76993954988838, -4.1660727508692, -4.79729309208069, -3.01612319246718, -4.24457439939841, -3.85311584135727, -5.21244168596673, -4.59893712154677, -4.32506332982446, -3.42135502720821, -4.29913459625934, -2.66886144187487, -3.735617308267, -2.03674245501626, -3.09749380274331, -1.20239254616901, -3.7057836215927, -2.90460251921896, -2.43829299943628, -1.02840876215168, -3.72793839867223, -1.07744461978086, -5.50289742785629, -2.7746374017664, -2.54962122488018, 0.19348842506018, -2.20423036389255, -2.74501062843141, -4.02906655494918, -2.89670978140722, -2.40400852574455, 0.183195364585619, -1.53071939614714, -2.50357189663165, -3.00861791331165, -2.14360653464355, -3.46092342056047, -0.734038243747995, -0.802951262018731, -0.746594777843863, -2.75680315422347, -1.35207261280949, -2.38481185970134, 0.610893102628081, -0.595559519616435, -0.995576495675736, -2.18839557573281, -0.126367439344556, -0.694313717008438, -0.4673688409276, -2.23166212471573, 2.21756044549052, -0.76815668918449, -0.139252863739403, -1.34059675366277, -0.0178601876726412, -2.07579842516306, 2.75224038913343, -0.886722928919003, -0.127963713810204, -0.324460730572518, -0.382969642787686, -0.361199506103139, 3.79034144975904, 1.56026422386632, -0.736763887926123, -0.948337987734984, 0.322867786556658, -0.354566420584274, 1.24156028034498, 0.476278331980471, -1.11104547393881, -0.251608769194651, -0.267511101231721, -1.20096869001497, -0.904763459387341, 1.67155255494594, -1.63496742526416, 0.67065948170928, 0.677944973138199, -1.64204875427016, -0.529871711790148, -0.509138674305355, -1.31373344802103, 1.23103735744937, -0.566478351657964, -2.27552494686477, -1.37927531417345, -2.1634437099342, -1.21126178181953, 1.62634760269983, -0.510540021828602, 0.565196091175754, -2.49033750748203, -3.17460770400437, -3.16501433564549, 2.30372307570156, -1.42143017881881, 0.115496062980373, -4.5370326092854, -4.85062663856886, -3.44325096245834, -1.00848523424375, -2.9566981508952, -1.10016670265762, -4.14648993776325, -5.14650700057325, -3.82878701441994, -1.00761772145364, -1.97193265040801), .Dim = c(6, 20))
"tau_obs" <- 1.64025753313924
"tau_proc" <- 0.79112636499987
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Super-Duper"
}



######################################################################################################
######################################################################################################
#### Data 
######################################################################################################
######################################################################################################

data{
"y" <- structure(c(-3.85980369014249, -2.86343927118061, -4.95159275346247, -4.95159275346247, -4.95159275346247, -4.95159275346247, -4.26355862228935, -1.85743696973239, -4.26355862228935, -4.95159275346247, -4.95159275346247, -4.26355862228935, NA, -3.85980369014249, -4.95159275346247, -2.86343927118061, -4.95159275346247, -4.95159275346247, -3.1683696152567, -3.57297780368645, -4.95159275346247, -1.910055720008, -3.57297780368645, -1.9584839181152, -3.85980369014249, -2.55012206191651, -4.26355862228935, -0.661508725238449, -3.57297780368645, -1.45640727768747, -4.95159275346247, 0.658075359447239, -4.95159275346247, -4.26355862228935, -3.57297780368645, 0.285233178195202, -2.46425572610276, -2.64405992074449, -4.95159275346247, -1.16773044583689, -2.64405992074449, 1.31776713186147, -1.51835421625552, -2.74774570870643, -1.51835421625552, -2.11966258526556, -2.55012206191651, -0.0607354836898151, -0.581476769814426, -0.703051798172265, -1.81356262524385, -1.23762564284707, -2.46425572610276, 0.545848385406104, -0.206935445467576, -2.17972929416229, -1.45640727768747, -0.689011472830919, -0.999476338867932, 0.269318592960969, -1.0186775184919, 2.75703540249097, -0.163611130691224, -0.376772502579018, -0.606837133839059, 0.537704412220319, -2.55012206191651, 3.57834089259093, -1.731198082625, 0.166422615608164, -0.825371688593113, -0.532607577803059, 1.18205601731843, 3.79213688288921, 1.41344057964001, -1.81356262524385, -0.594076560473089, 0.897748741042104, -0.00997747407868495, 1.55436319024868, 0.871741857734603, -1.26205351705275, 1.06955146236881, -1.16773044583689, -0.569033760516405, -0.689011472830919, 0.0592798458080164, -0.376772502579018, 0.464408088230409, 0.142429802890188, -1.31277577255996, -0.891422193820534, -0.761271566892886, -0.556743678768707, 1.43890392109862, -0.891422193820534, -2.24363589004942, -1.85743696973239, -2.74774570870643, -0.429134835254822, 2.24602237489292, 0.679591787844505, 1.5193101505469, -2.86343927118061, -3.85980369014249, -1.1024030572059, 4.40235696751028, -2.24363589004942, NA, -3.85980369014249, -4.95159275346247, -3.57297780368645, -0.761271566892886, -3.85980369014249, -0.269093075706006, -3.01446390455736, -4.95159275346247, -3.3503483160569, -1.42681583503013, -2.00937729712331), .Dim = c(6, 20))
"year_no" <- c(1, 2, 3, 4, 5, 6)
"season_weeks" <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20)
"x_ic" <- -5
"tau_ic" <- 100
"a_proc" <- 0.001
"r_proc" <- 0.001
"a_obs" <- 15.37
"r_obs" <- 7.84


}

######################################################################################################
######################################################################################################
